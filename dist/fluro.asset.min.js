angular.module("fluro.asset",[]),angular.module("fluro.asset").service("Asset",function(Fluro,$window){var controller={};return controller.getUrl=function(id,params){var extension;params&&_.isString(params)&&(extension=params),params||(params={});var url=Fluro.apiURL+"/get/"+id;extension&&(params.extension=extension),params.extension&&params.extension.length&&(url+="/file/file."+params.extension,delete params.extension),params.withoutToken||!params.access_token&&Fluro.token&&(params.access_token=Fluro.token);var queryParams=_.map(params,function(v,k){return encodeURIComponent(k)+"="+encodeURIComponent(v)}).join("&");return queryParams.length&&(url+="?"+queryParams),url},controller.thumbnailUrl=function(id){return controller.getUrl(id,{w:50})},controller.imageUrl=function(_id,w,h,params){params||(params={});var url=Fluro.apiURL+"/get/"+_id,limitWidth=1920;$window.screen.width<=768&&(limitWidth=1536),$window.screen.width<=320&&(limitWidth=640),w||h?(w&&(params.w=w),h&&(params.h=h)):params.w=limitWidth,params.extension&&params.extension.length&&(url+="/file/file."+params.extension,delete params.extension),params.withoutToken||!params.access_token&&Fluro.token&&(params.access_token=Fluro.token);var queryParams=_.map(params,function(v,k){return encodeURIComponent(k)+"="+encodeURIComponent(v)}).join("&");return queryParams.length&&(url+="?"+queryParams),url},controller.downloadUrl=function(id){var url=Fluro.apiURL+"/download/"+id;return Fluro.token&&(url+="?access_token="+Fluro.token),url},controller.isAssetType=function(object){switch(object._type){case"asset":case"video":case"audio":case"image":return!0;default:return!1}},controller});